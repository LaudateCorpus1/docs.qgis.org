
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Ajouter les outils GRASS</title>
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-2.3.2/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/qgis-style.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-2.3.2/css/bootstrap-responsive.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '3.8.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script type="text/javascript" src="../../../_static/qgis-site.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-2.3.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.countdown-2.0.4/jquery.countdown.min.js"></script>
    <link rel="shortcut icon" href="../../../_static/images/favicon.ico?1322140996"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Rechercher" href="../../../search.html" />
    <link rel="next" title="Tests" href="../tests.html" />
    <link rel="prev" title="Development in QGIS" href="development.html" />
    <script src="https://js.stripe.com/v3/"></script>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
    <meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../tests.html" title="Tests"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="development.html" title="Development in QGIS"
             accesskey="P">précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html"></a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Contribuez / Développement</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Développement</a> &#187;</li> 
      </ul>
    </div>

    
  <div id="navbar" class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="../../index.html">QGIS</a>
        <span class="navbar-text pull-left"><p><b>3.8.2 ​ <br/> 3.4.11 LTR</b></p></span>
        
          <select id="languages">
  <!-- note on the options here: the 'title' string is to be translated in your
  language, but the element text is supposed to stay in native lang/txt -->
  <option value="en" title="Anglais">English</option>
  <option value="ca" title="Catalan">Català</option>
  <option value="da" title="Danois">Dansk</option>
  <option value="de" title="Allemand">Deutsch</option>
  <option value="es" title="Espagnol">Español</option>
  <option value="fa" title="Perse">فارسی</option>
  <option value="fi" title="Finnois">Suomi</option>
  <option value="fr" title="Français">Français</option>
  <option value="gl" title="Galicien">Galego</option>
  <option value="id" title="Indonésien">Bahasa Indonesia</option>
  <option value="it" title="Italien">Italiano</option>
  <option value="hu" title="Hongrois">Magyar</option>
  <option value="ja" title="Japonais">日本語</option>
  <option value="km_KH" title="Khmer">ភាសាខ្មែរ    </option>
  <option value="ko" title="Coréen">한국어</option>
  <option value="lt" title="Lituanien">Lietuvių</option>
  <option value="nl" title="Hollandais">Nederlands</option>
  <option value="pl" title="Polonais">Polski</option>
  <option value="pt_BR" title="Portugais (Brésil)">Português (Brasil)</option>
  <option value="pt_PT" title="Portugais">Português</option>
  <option value="ro" title="Roumain">Română</option>
  <option value="tr" title="Turque">Türkçe</option>
  <option value="ru" title="Russe">Русский</option>
  <option value="uk" title="Ukrainien">Українська</option>
  <option value="zh-Hans" title="Chinois (simplifié)">簡体中文</option>
  <option value="zh-Hant" title="Chinois (Traditionnel)">正體中文</option>
</select>

<script>
    var currentPage = 'site/getinvolved/development/addinggrasstools.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    // split index.html if currentUrl is ended by '/'
    var currentUrl = window.location.href;
    if (currentUrl.slice(-1) == '/' && currentPage.slice(-1) != '/'){
      var pages = currentPage.split('/');
      pages.pop();
      currentPage = pages.join('/') + '/';
    }
    $(document).ready(function(){
        var search = new RegExp('\/[a-zA-Z_-]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is the index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_-]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_-]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave
        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('This is an documentation error, please report back to QGIS devs.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');
        // TODO: links should come from conf.py
        // TODO: all template pages have the actual translation in sphinc.conf
        // IMPORTANT: space, -, _ etc replacing below must be 100% inline with
        // code in scripts/create_transifex_resources.sh !!
        // https://github.com/qgis/QGIS-Website/blob/master/scripts/create_transifex_resources.sh
        fix_translation_link = 'https://www.transifex.com/projects/p/qgis-website/translate/#' + 
            currentLang.slice(1) + currentPage.replace(/_/g, "-").replace(/ /g, "-").replace(/\//g, "_").replace(/\.html/g, "").replace(/\./g, "-")
        if ('/en/' != currentLang) {
            $('#fix_translation_link').attr('href', fix_translation_link);
        }
        fix_text_link = 'https://github.com/qgis/QGIS-Website/edit/master/source/' +
            currentPage.replace(/.html/g, ".rst")
        // TODO: only on rst pages, here a list of pages which are actual templates?
        if (true){
            $('#fix_text_link').attr('href', fix_text_link);
        }

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

        if (currentPage == "site/about/screenshots.html"){
            atom('/feeds/qgisflickrscreenshots.atom', '#qgisflickrscreenshotsatom', 30, false, 'span3');
            atom('/feeds/qgisflickrmaps.atom', '#qgisflickrmapsatom', 30, false, 'span3');
        }
        else if (currentPage == "site/about/sustaining_members.html" || currentPage.indexOf("visualchangelog")>0){
            // crontab is pulling url's below and copy to /feed at qgis.org
            // http://changelog.qgis.org/en/qgis/sponsors/json/
            json2html('/feeds/qgissponsors.json', '#qgissustainingmembersatom', 1000, true, 'span3');
            // http://changelog.qgis.org/en/qgis/past-sponsors/json/?years_limit=2
            json2html('/feeds/qgispastsponsors.json', '#qgispastsustainingmembersatom', 1000, true, 'span3');
        }
        else if (currentPage == "site/forusers/download.html" || currentPage == "site/forusers/alldownloads.html"){
            $($('section.content')[0]).append('<div id="thankyou"> <div id="thankyoucontent">'+
            '<h2>Merci !</h2> <p/>'+
            '<div class="container"><div class="span8">'+
            '<p>Your freshly baked copy of QGIS is downloading. QGIS is free of charge, and will always be free of charge if downloaded from QGIS.org. If you can afford to support the project and people making this software, please consider making <a href="https://qgis.org/en/site/getinvolved/donations.html">a small donation to support</a> our efforts. Whether you choose to donate or not, we hope that you enjoy using our labour of love and encourage you to share and spread your downloaded copy far and wide so that others may enjoy it too. Our very best regards!</p>'+
            '<p>L’Equipe QGIS</p>'+
            '</div><div class="container">'+
            '<div class="span4"><p><a class="btn btn-large btn-success btn-flat" href="../getinvolved/donations.html">Faites un don à QGIS</a></p><p class="muted"></p></div>'+
            '<div class="span5"><p><a id="closethankyou"class="btn btn-large btn-success btn-flat" href="#">Fermer ce message</a></p><p class="muted"></p></div>'+
            '</div>'+
            '<br/><p><img src="../../../_static/images/splash.png"/></p></div>');
            $('#thankyou').click(function(){ $('#thankyou').hide(); });
            $('#closethankyou').click(function(){ $('#thankyou').hide(); });
            $('a.reference').click(function(){
                $('#thankyou').show();
                return true;
            });
	    replacesha('qgis-rel-dev-x86');
	    replacesha('qgis-rel-dev-x86_64');
	    replacesha('qgis-ltr-dev-x86');
	    replacesha('qgis-ltr-dev-x86_64');
	    replacesha('qgis-dev-x86');
	    replacesha('qgis-dev-x86_64');
        }
        else if (currentPage == "site/getinvolved/donations.html"){
            // inject the stripeform into this page
            $.get( "/stripe/form", function( data ) { $( "#stripe" ).html( data ); });
            // create thankyou and error page
            $($('div.container')[0]).append('<div id="thankyou"> <div id="thankyoucontent">'+
            '<h2>Merci pour votre don !</h2> <p/>'+
            '<div class="container"><div class="span8">'+
            '<p id="stripemsg">QGIS est gratuit et nous espérons que vous aimez utiliser le fruit de nos labeurs, nous vous encourageons à partager et à propager le plus possible la copie que vous avez téléchargée pour que les autres en profitent aussi. Avec toute notre considération.</p>'+
            '<p id="stripeerr" style="display:none;">Il y a malheureusement eu une erreur lors du traitement de votre don. Veuillez réessayer plus tard, ou veuillez nous contacter à finance@qgis.org</p>'+
            '<p>L’Equipe QGIS</p>'+
            '</div><div class="container">'+
            '<div class="span5"><p><a id="closethankyou"class="btn btn-large btn-success btn-flat" href="#">Fermer ce message</a></p><p class="muted"></p></div>'+
            '</div>'+
            '<br/><p><img src="../../../_static/images/splash.png"/></p></div>');
            $('#thankyou').click(function(){ $('#thankyou').hide(); });
            $('#closethankyou').click(function(){ $('#thankyou').hide(); });
        }
    });

    //
    // load current page in a different language
    //
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
    //
    // function to load a json (feed) and create html for it
    // currently only used for sustaining members
    //
    function json2html(url, holder, count, showcont, spanclass){
        var html = '';
        $.getJSON(url, function (data) {
            if (spanclass == undefined){
                spanclass = "span2"
            }
            var maxitems = 7;
            if(count)maxitems=count;
            var showcontent = false;
            if(showcont)showcontent=showcont;
            var counter = 0;

            $.each( data.rss.channel.item, function( key, val ){
              var item = val;
              var imglink = '#';
              var link = '#';
              var content = '';
              var sponsor_level = 'Bronze';
              if (item.sponsor_url){link=item.sponsor_url};
              if (item.image_url){imglink=item.image_url};
              if (item.sponsor_level){sponsor_level=item.sponsor_level};
              var title = item.title;
              content = '<div><img class="sponsor_img '+sponsor_level.toLowerCase()+'" src="'+imglink+'" width="300px"></div>'+
                '<p class="sponsor_body '+sponsor_level.toLowerCase()+'">'+item.sponsor_country+'<br/>Sponsorship level: '+sponsor_level+'<br/>'+
                '('+item.start_date+' - '+item.end_date+')</p>';
              html+='<div class="clearfix"><a  class="clearfix" href="'+link+'">';
              html+='<div class="sponsordiv"><h4>'+title+'</h4>';
              html+=content;
              html+='</div></a></div>';
            })
          $(holder).append(html);
        })
    }
    //
    // function to load an atom feed, an put it in an element
    //
    function atom(url, holder, count, showcont, spanclass){
        $.get(url, function (data) {
            var html = "";
            if (spanclass == undefined){
                spanclass = "span2"
            }
            var maxitems = 7;
            if(count)maxitems=count;
            var showcontent = false;
            if(showcont)showcontent=showcont;
            var counter = 0;
            $(data).find("entry").each(function () {
                var el = $(this);
                var title = el.find('title').text();
                var author = el.find('name').text();
                var content = el.find('content').text();
                if (content.length==0){
                    // try summary
                    content = el.find('summary').text();
                }
                var imglink='#';
                var link='#';
                el.find('link').each(
                    function(){
                        // flickr image for maps and qgis screenshots
                        if ($(this).attr('rel') == 'enclosure'){
                            //    s - Specifies the small square size of 75x75 pixels.
                            //    t - Specifies the thumbnail size with 100 pixels on the longest side.
                            //    m - Specifies the medium size with 240 pixels on the longest side.
                            //    z - Specifies the medium size with 640 pixels on the longest side.
                            //    b - Specifies the large size with 1024 pixels on the longest side.
                            //    q - square 
                            imglink = $(this).attr('href').replace('_b.jpg','_q.jpg');
                        }
                        // links
                        else if ($(this).attr('rel') == 'alternate'){
                            link = $(this).attr('href');
                        }
                    }
                )
                counter++;

                if (counter<=maxitems && 
                    (holder == '#qgisflickrmapsatom' || holder == '#qgisflickrscreenshotsatom') ){
                    // html for flickr maps
                    html+='<div class="'+spanclass+'"><p><a class="external" href="'+link+'">';
                    if(imglink!='#'){ html+='<img class="flickrimg" src="'+imglink+'"/>'; }
                    html+='</a></p></div>\n';
                }
                else if (counter<=maxitems){
                    // visual changelogs, qugs feed and planet feed
                    var addit = true;
                    if (holder == '#qgisplanetatom'){
                        var s = title.split(':');
                        title = s[0];
                        content = s[1];
                        // skip blog.qgis.org posts
                        if (link.indexOf('blog.qgis.org')>=0){
                            addit = false;
                            counter --;
                        }
                    }
                    else if (holder == '#qgissustainingmembersatom' || holder == '#qgissustainingmembersatom'){
                        html+='<div class="clearfix"><a  class="clearfix" href="'+link+'">';
                        html+='<div class="sponsordiv"><h4>'+title+'</h4>';
                        html+=content;
                        html+='</div></a></div>';
                        addit = false; // we are building html ourselves!!
                    }
                    else if (holder == '#qgisblogatom'){
                        var s = title.split(':');
                        if (s[0] != 'QGIS Project blog'){
                            addit = false;
                            counter--;
                        }
                        // trying to extract date from link
                        // http://blog.qgis.org/2017/09/02/do-you-want-to-host-a-qgis-developer-meeting/
                        d = link.split('/').slice(3,6);  // 2017,09,02
                        title = '<img src="../_static/logo.png" style="width:30px;"/> - ' + d[0] + '/' + d[1] + '/' + d[2] + ' - ' + s[1];
                        content = '';
                    }
                    if (addit){
                        html+='<a class="external" href="'+link+'">';
                        html+='<div class="info-box" style="padding:10px;color:#666;"><b>'+title+'</b><br/>';
                        if (showcontent) { html+=content; };
                        html+='</div></a>\n';
                    }
                }
            });
            $(holder).append(html);
        });
    }

    //
    // function to replace a item
    //
    function replacesha(id) {
      var xhr = new XMLHttpRequest();
      xhr.onload = function () {
	var sha = this.responseText.substring(this.responseText.indexOf(':')+1);
        document.getElementById(id).innerHTML = "<a target=\"_new\" href=\"http://github.com/qgis/QGIS/commit/" + sha + "\">" + sha + "</a>";
      };
      xhr.open('GET', '/downloads/' + id + '.sha');
      xhr.send();
    }
</script>
        
        <div class="nav-collapse collapse">
          <ul class="unstyled nav main-menu">
            <li><a href="../../about/index.html">Découvrir</a></li>
            <li><a href="../../forusers/index.html">Pour les utilisateurs</a></li>
            <li><a href="../index.html">Contribuer</a></li>
            <li><a href="../../../docs/index.html">Documentation</a></li>
            <li>
          
<form class="navbar-search" action="../../../search.html" method="get">
  <input type="text" name="q" class="search-query" placeholder="Rechercher" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </li>
          </ul>
        </div>
      </div>
    </div>
  </div>


    <div style="display:none;" class="container" id="nextprev" >
    
    <a accesskey="p" href="development.html">&lt;&lt; prev</a>
    
    
    <a accesskey="n" href="../tests.html">next &gt;&gt;</a>
    
    </div>




    
        <div class="container">
            <div class="row">
      <div class="span4">
        <div id="sidebar" class="bs-sidenav well" data-spy="scroll"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">Découvrez QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../forusers/index.html">Utiliser</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Contribuez / Développement</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../document.html">Ecrire de la documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../translate.html">Traduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Développement</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="contributor_requirements.html">Critères pour les nouveaux contributeurs</a></li>
<li class="toctree-l3"><a class="reference internal" href="roadmap.html">Feuille de route</a></li>
<li class="toctree-l3"><a class="reference internal" href="bugreporting.html">Bogues, Fonctionnalités et Problèmes</a></li>
<li class="toctree-l3"><a class="reference internal" href="development.html">Development in QGIS</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Ajouter les outils GRASS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-configuration">Configuration du module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#menu-configuration">Configuration du menu</a></li>
<li class="toctree-l4"><a class="reference internal" href="#general-rules-for-new-modules">Règles générales pour les nouveaux modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specific-rules-for-module-descriptions">Règles spécifiques pour les descriptions de modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#options-which-cannot-be-currently-used">Options ne pouvant pas être utilisée pour le moment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modules-which-can-be-added">Modules qui peuvent être ajoutés</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modules-to-be-deprecated">Modules obsolètes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tests.html">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daily_reports/index.html">Rapports journaliers</a></li>
<li class="toctree-l2"><a class="reference external" href="http://plugins.qgis.org">Plugins website</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mailinglists.html">Listes de diffusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../governance/index.html">Organisation du projet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../meetings/index.html">Rencontres</a></li>
<li class="toctree-l2"><a class="reference internal" href="../governance/sustaining_members/index.html">Sustaining Membership Program</a></li>
<li class="toctree-l2"><a class="reference internal" href="../donations.html">Dons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../certification.html">Certification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html">Questions fréquentes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../styleguide.html">Guide de Style Visuel</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/index.html">Documentation</a></li>
</ul>

        </div>
      </div>
                <div class="span8">
                    
                        
                            <div class="section" id="adding-grass-tools">
<span id="addinggrasstools"></span><h1>Ajouter les outils GRASS<a class="headerlink" href="#adding-grass-tools" title="Lien permanent vers ce titre">¶</a></h1>
<p>Les modules GRASS peuvent être lancés depuis les <em>Outils GRASS</em> de QGIS si QGIS a été ouvert depuis une console GRASS ou si un jeu de données GRASS a été ouvert dans QGIS. Ces modules ne fonctionnent qu’avec des données GRASS.</p>
<p>Il est facile de modifier le menu et d’y ajouter de nouveaux modules car le menu et les modules sont configurés via des fichiers XML. Ci-dessous, voici comment écrire de nouveaux modules et comment modifier l’arborescence du menu.</p>
<div class="section" id="module-configuration">
<h2>Configuration du module<a class="headerlink" href="#module-configuration" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="background">
<h3>Contexte<a class="headerlink" href="#background" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les options de chaque module affichées dans l’onglet _*Options_* du module sont créées en se basant sur la définition présente dans le fichier QGM (QGIS GRASS module) ainsi que la définition présente dans le module GRASS ou le script GRASS GMO (GRASS module options). Etant donné que chaque option dans le QGM est liée à une (ou plusieurs) option(s) dans le GMO, il est souvent nécessaire de consulter le fichier GMO. Les GMO sont extraits par le module GRASS lorsqu’il est lancé avec l’option _*–interface-description_*, la sortie étant au format XML, par exemple:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">vect</span> <span class="o">--</span><span class="n">interface</span><span class="o">-</span><span class="n">description</span>
</pre></div>
</div>
<p>Certains modules GRASS ont trop d’options qui peuvent être confuses pour des débutants. Dans le fichier QGM, il est possible de n’en définir que certaines et de leur attribuer une valeur par défaut ou de cacher certaines options. Cela signifie que plusieurs modules QGIS-GRASS peuvent être définis pour un module GRASS. Par exemple le module r.to.vect a été séparé en trois modules QGIS-GRASS avec des options prédéfinies. La définition QGM est écrite en XML avec une extension en .qgm, un fichier par module QGIS-GRASS. Les fichiers de configuration sont stockés dans le répertoire _*qgis/src/plugins/grass/modules*_  et installés dans le répertoire _*share/qgis/grass/modules*_. Le nom du fichier doit commencer par le nom du module GRASS + un mot décrivant la tâche. Par exemple, le module qui extrait des lignes vecteur depuis un raster est appelé r.to.vect.line.qgm.</p>
<p>Voici un exemple de fichier de configuration :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE qgisgrassmodule SYSTEM &quot;http://mrcc.com/qgisgrassmodule.dtd&quot;&gt;
&lt;qgisgrassmodule label=&quot;Generate aspect map from DEM&quot; module=&quot;r.slope.aspect&quot;&gt;
       &lt;option key=&quot;elevation&quot; /&gt;
       &lt;option key=&quot;aspect&quot; /&gt;
&lt;/qgisgrassmodule&gt;
</pre></div>
</div>
</div>
<div class="section" id="qgisgrassmodule-tag-attributes">
<h3>Attributs-étiquettes qgisgrassmodule<a class="headerlink" href="#qgisgrassmodule-tag-attributes" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><em>label</em> — description utilisée dans l’arbre du menu</li>
<li><em>module</em> — nom du module GRASS exécutable ou scripté</li>
</ul>
</div>
<div class="section" id="option-tags">
<h3>Etiquettes d’option<a class="headerlink" href="#option-tags" title="Lien permanent vers ce titre">¶</a></h3>
<p>Chaque étiquette qgisgrassmodule peut contenir une ou plusieurs options:</p>
<ul class="simple">
<li><em>option</em> – correspond à l’étiquette du paramètre GMO, par exemple:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">option</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;elevation&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><em>flag</em> — correspond à l’étiquette de drapeau GMO, par exemple:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">flag</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;o&quot;</span> <span class="n">answer</span><span class="o">=</span><span class="s2">&quot;on&quot;</span> <span class="n">hidden</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><em>field</em> — défini l’attribut de champ pour les couches vecteur, l’option est créée sous forme de liste déroulante avec les champs disponibles. Par exemple (v.to.db.qgm):</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">field</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;column&quot;</span> <span class="n">layer</span><span class="o">=</span><span class="s2">&quot;map&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;integer,double&quot;</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Attribute field&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><em>selection</em> — il s’agit d’un type d’option intéressant et utile. Elle permet de définir une liste de catégories de vecteurs GRASS en utilisant l’interface de QGIS. Les entités (et leurs catégories, l’équivalent de l’identifiant GRASS) peuvent être choisies soit par l’outil “Selection des entités” ou dans la table d’attributs. La liste des catégories est mise à jour dynamiquement. Par exemple (v.extract.list.qgm):</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">selection</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;list&quot;</span> <span class="n">layerid</span><span class="o">=</span><span class="s2">&quot;input&quot;</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Cats&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="common-option-flag-tag-attributes">
<h3>Attributs-étiquettes pour les options/drapeaux courants<a class="headerlink" href="#common-option-flag-tag-attributes" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><em>key</em> — nom de l’option du module GMO</li>
<li><em>answer</em> — valeur par défaut (écrase la valeur par défaut du GMO); la valeur «&nbsp;on&nbsp;» s’applique à un drapeau.</li>
<li><em>hidden</em> — l’option n’apparaîtra pas dans la boîte de dialogue mais le module l’utilisera quand-même (hidden=&nbsp;»yes&nbsp;»).</li>
<li><em>label</em> — label de l’option</li>
<li><em>advanced</em> — «&nbsp;yes&nbsp;» ou «&nbsp;no&nbsp;», la valeur par défaut étant «&nbsp;no&nbsp;». Si la valeur vaut «&nbsp;yes&nbsp;», l’option ou drapeau est ajouté(e) au panneau initialement masqué des options avancées. Le bouton «&nbsp;Montrer les options avancées &gt;&gt;&nbsp;» est affiché pour les options simples (basique, standard).</li>
<li><em>version_min</em> — version minimum de GRASS pour laquelle cette option ou ce drapeau est valide.</li>
<li><em>version_max</em> — version maximale de GRASS pour laquelle cette option ou ce drapeau est valide.</li>
</ul>
</div>
<div class="section" id="option-tag-specific-attributes">
<h3>Attributs-étiquettes sépcifiques<a class="headerlink" href="#option-tag-specific-attributes" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p class="first"><em>typeoption</em> — cette option est utilisée avec les couches vecteur pour définir le nom de l’option du type de vecteur d’entrée. Lorsque le module est lancé, le type de la couche vecteur sélectionnée est utilisé pour cette option. Par exemple (v.overlay.or.qgm):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">option</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;ainput&quot;</span> <span class="n">typeoption</span><span class="o">=</span><span class="s2">&quot;atype&quot;</span> <span class="n">layeroption</span><span class="o">=</span><span class="s2">&quot;alayer&quot;</span> <span class="n">typemask</span><span class="o">=</span><span class="s2">&quot;area,line&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<p>Cela signifie que si une couche est sélectionnée dans la liste déroulante, l’option _*atype*_ reçoit automatiquement le type de la couche et que cette variable n’a pas à être ajoutée.</p>
</li>
<li><p class="first"><em>layeroption</em> — équivalent à typeoption pour une couche (non vecteur).</p>
</li>
<li><p class="first"><em>typemask</em> — définit les types de couches vecteur d’entrée autorisés. Seules les couches de l’un des types définis seront affichées en entrée. Voir v.overlay.or.qgm comme exemple.</p>
</li>
</ul>
</div>
<div class="section" id="field-tag-specific-attributes">
<h3>Attributs spécifiques des champs<a class="headerlink" href="#field-tag-specific-attributes" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p class="first"><em>layer</em> — l’attribut essentiel de l’option qui détermine le vecteur qui dépend de ce champ.</p>
</li>
<li><p class="first"><em>type</em> — définit le type des champs d’attribut qui doivent être ajouté à la liste déroulante des champs, par exemple:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">field</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;column&quot;</span> <span class="n">layer</span><span class="o">=</span><span class="s2">&quot;map&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;integer,double&quot;</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Attribute field&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<p>Cela signifie que seuls les champs d’attribut de type entier ou réel double seront présents dans la liste déroulante. Consultez v.what.vect comme exemple (2 vecteurs différents).</p>
</li>
</ul>
</div>
<div class="section" id="behind-the-scene">
<h3>L’envers du décor<a class="headerlink" href="#behind-the-scene" title="Lien permanent vers ce titre">¶</a></h3>
<p>L’idée de l’implémentation des modules QGIS-GRASS est d’utiliser le maximum d’informations des fichiers GMO et de simplifier l’interface. Voici quelques règles sur la manière dont sont utilisées les informations GMO et dans quel ordre elles sont utilisées si elles ne sont pas toutes définies dans le GMO.</p>
<ul class="simple">
<li><em>label</em> — si un attribut de label est défini dans le fichier QGM, il est alors utilisé comme label de l’option, s’il n’est pas défini dans le GMO, le label d’option est utilisé. Si ce dernier n’est pas défini dans le GMO, l’étiquette de description d’option est utilisée.</li>
<li><em>tooltip</em> — (apparaît lors du déplacement de la souris sur l’option) si un label est défini (soit dans le QGM ou le GMO) et qu’une description est définie dans le GMO (le label et la description sont différents), alors l’étiquette de description du GMO est utilisée comme infobulle.</li>
<li>label <em>multiple values</em> — si l’option a un type multiple avec une liste des valeurs possible (comme les options de chargement de v.distance) et qu’une étiquette de description est définie pour la valeur dans le GMO alors elle sera utilisée comme label de case à cocher.</li>
</ul>
</div>
<div class="section" id="picture">
<h3>Icône<a class="headerlink" href="#picture" title="Lien permanent vers ce titre">¶</a></h3>
<p>Chaque module doit être représenté par une icône qui symbolise la fonction du module. Les icône sont stockées dans le répertoire plugins/grass/modules au format SVG (<em>.svg) ou PNG (</em>.png).</p>
<p>Actuellement, il existe 3 schémas pour les images:</p>
<ul class="simple">
<li>1 image</li>
<li>2 images — QGIS créera l’icône: 1 -&gt; 2</li>
<li>3 images — QGIS crééra l’icône: 1 + 2 -&gt; 3</li>
</ul>
<p>Le nom de l’image commence par le nom du module QGIS-GRASS auquel est ajouté un numéro d’image, par exemple: v.overlay.and.1.svg, v.overlay.and.2.svg, v.overlay.and.3.svg. Il est possible de combiner des images SVG et PNG.</p>
<p>Les images PNG et SVG peuvent être générées depuis le <em>Composeur de cartes</em> de QGIS. La taille des images PNG est généralement plus volumineuse que la taille de l’icône car il est attendu qu’elles seront utilisées plus tard dans la documentation générée automatiquement où les images utilisées ont une taille plus grande.</p>
</div>
<div class="section" id="qgis-grass-scripts">
<h3>Scripts GRASS pour QGIS<a class="headerlink" href="#qgis-grass-scripts" title="Lien permanent vers ce titre">¶</a></h3>
<p>Étant donné qu’il peut se passer beaucoup de temps pour qu’un nouveau script soit ajouté à la version stable de GRASS et parce que certains scripts peuvent être utiles seulement pour l’interface graphique de QGIS, il est possible d’ajouter des scripts “GRASS” à QGIS. Les scripts doivent suivre les règles des scripts GRASS et il sont situés dans le répertoire qgis/src/plugins/grass/scripts.</p>
</div>
</div>
<div class="section" id="menu-configuration">
<h2>Configuration du menu<a class="headerlink" href="#menu-configuration" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une fois obtenu le nouveau fichier de configuration QGM, nous pouvons ajouter le module à la liste des modules. Cette liste est définie dans le fichier qgis/src/plugins/grass/config/default.qgc. Les sections du fichier sont organisées hiérarchiquement dans le menu sous la forme d’un arbre.</p>
<p>Voici un exemple d’un enregistrement pour le module r.to.vect.line.qgm</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">section</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Convert raster to vector&quot;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">grass</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;r.to.vect.line.qgm&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">section</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Pour chaque section/module, il est possible d’indiquer la version GRASS valide en utilisant les attributs version_min/version_max:</p>
<ul class="simple">
<li><em>version_min</em> — version minimum de GRASS pour laquelle cette section ou ce module est valide.</li>
<li><em>version_max</em> — version maximum de GRASS pour laquelle cette section ou ce module est valide</li>
</ul>
</div>
<div class="section" id="general-rules-for-new-modules">
<h2>Règles générales pour les nouveaux modules<a class="headerlink" href="#general-rules-for-new-modules" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les <em>Outils GRASS</em> sont plutôt destinés aux novices et pas pour les utilisateurs avancés. Les règles de base sont les suivantes :</p>
<ul class="simple">
<li>Chaque module doit proposer au plus 3 options ; s’il semble nécessaire d’en ajouter, cela doit être discuté au préalable.</li>
<li>Le module doit être robuste de telle sorte qu’il ne soit pas possible de lancer le module avec de mauvaises options.  S’il n’y a pas de documentation sur certaines options, le module ne doit pas être ajouté au menu.</li>
</ul>
</div>
<div class="section" id="specific-rules-for-module-descriptions">
<h2>Règles spécifiques pour les descriptions de modules<a class="headerlink" href="#specific-rules-for-module-descriptions" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li>Évitez la 3ème personne pour les verbes, par exemple utilisez «&nbsp;Exporter le raster&nbsp;» au lieu de «&nbsp;Exporte le raster&nbsp;»</li>
<li>Évitez les termes superflus tels que «&nbsp;carte&nbsp;», «&nbsp;couche&nbsp;» et «&nbsp;fichier&nbsp;», par exemple «&nbsp;Exporter le raster&nbsp;» au lieu de «&nbsp;Exporter la couche raster&nbsp;»</li>
<li>Évitez le terme «&nbsp;GRASS&nbsp;» quand il n’est pas nécessaire, par exemple «&nbsp;Exporter le raster&nbsp;» au lieu de «&nbsp;Exporter le raster GRASS&nbsp;»</li>
<li>Évitez l’emploi de «&nbsp;un/une&nbsp;» ou «&nbsp;des&nbsp;», par exemple «&nbsp;Exporter le raster&nbsp;» au lieu de «&nbsp;Exporter un raster&nbsp;»</li>
<li>Évitez les mots superflus, par exemple «&nbsp;Exporter le raster&nbsp;» au lieu de «&nbsp;Permettre l’export du raster&nbsp;»</li>
<li>N’employez pas le verbe «&nbsp;Convertir&nbsp;», utilisez «&nbsp;Exporter&nbsp;» ou «&nbsp;Importer&nbsp;». Le terme convertir doit être utilisé pour des conversions internes à GRASS (par exemple d’un raster vers un vecteur).</li>
<li>Les acronymes doivent être écrits en majuscule, par exemple ASCII au lieu de ascii</li>
<li>En cas de doute, référez-vous à des modules similaires pour maintenir la cohérence</li>
</ul>
</div>
<div class="section" id="options-which-cannot-be-currently-used">
<h2>Options ne pouvant pas être utilisée pour le moment<a class="headerlink" href="#options-which-cannot-be-currently-used" title="Lien permanent vers ce titre">¶</a></h2>
<p>Techniquement n’importe quelle option peut être employée. Certains types d’options ne sont pas gérées correctement, par exemple, celles qui dépendent d’une autre option. Voici une liste (probablement incomplète) d’options qui ne sont pas gérées correctement et qui ne devraient pas être utilisées pour le moment:</p>
<ul class="simple">
<li>Couche ou DSN OGR (v.in.ogr) en entrée</li>
</ul>
</div>
<div class="section" id="modules-which-can-be-added">
<h2>Modules qui peuvent être ajoutés<a class="headerlink" href="#modules-which-can-be-added" title="Lien permanent vers ce titre">¶</a></h2>
<p>La majorité des modules peuvent être ajoutés. Si vous en avez besoin de plus, merci d’écrire sur la liste de diffusion de développement de QGIS et de lister les modules que vous pensez être les plus important à ajouter.</p>
<p>Vous devriez publier le nom d’un nouveau module QGIS-GRASS ainsi que le module GRASS et les options que vous souhaitez utiliser. Par exemple:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">vect</span><span class="o">.</span><span class="n">area</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">vect</span> <span class="nb">input</span> <span class="n">output</span> <span class="n">feature</span><span class="o">=</span><span class="n">area</span>
</pre></div>
</div>
<p>Consultez également  <a class="reference external" href="http://grass.osgeo.org/wiki/GRASS-QGIS_relevant_module_list">la liste des modules GRASS-QGIS pertinents</a>.</p>
</div>
<div class="section" id="modules-to-be-deprecated">
<h2>Modules obsolètes<a class="headerlink" href="#modules-to-be-deprecated" title="Lien permanent vers ce titre">¶</a></h2>
<p>Voici une liste de modules qui devraient être supprimés avec une explication sur leur problème (ex: certains modules liés aux projections sont difficiles à comprendre et ne sont pas d’une grande utilité). Merci de note que certains modules n’ont pas été complètement testés. Merci de les tester et de remonter une erreur sous redmine (ou mieux encore de faire la correction vous-même et d’envoyer un patch).</p>
</div>
</div>

                        
                    
                </div>
                  
            </div>
        </div>
    

    <!--<a href="https://github.com/qgis/"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a>-->
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="../tests.html" title="Tests"
             >suivant</a> |</li>
        <li class="right" >
          <a href="development.html" title="Development in QGIS"
             >précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html"></a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Contribuez / Développement</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Développement</a> &#187;</li> 
      </ul>
    </div>
  <footer class="footer">

    <div class="container">
        <div>
          <ul class="unstyled inline" id="social">
            <li id="twitter"><a href="http://twitter.com/qgis" class="external"><div></div></a></li>
            <li id="facebook"><a href="https://www.facebook.com/pages/QGIS-Quantum-GIS-/298112000235096" class="external"><div></div></a></li>
            <li id="gplus"><a href="http://plus.google.com/communities/114776597176808981624" class="external"><div></div></a></li>
            <li id="github"><a href="http://github.com/qgis/" class="external"><div></div></a></li>
            <li id="aboutcontact"><a href="../index.html"><div></div></a></li>
          </ul>
        </div>

        <p class="credit">Sauf indication contraire, tout le contenu est sous licence <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 licence (CC BY-SA)</a></p>
    </div>
    <div class="container">
      <p class="credit">
        Sélectionner des graphiques depuis la collection <a href="http://thenounproject.com" target="_blank">"The Noun Project"</a>.
        
        
      </p>
      <p class="credit">
        Vous avez lu une page non traduite ? Ou vous avez observé une erreur de traduction:
        <a id="fix_translation_link" target="_blank" href="https://www.transifex.com/projects/p/qgis-website/">corrigez-moi</a>
        <br/>
        Erreur de texte, texte manquant on non explicite:
        <a id="fix_text_link" target="_blank" href="https://github.com/qgis/QGIS-Website">corrigez-moi</a>
      </p>
    </div>
  </footer>

  </body>
</html>